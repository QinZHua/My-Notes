对象的扩展
===

属性的简洁表示法
---

ES6 允许在大括号里面，直接写入变量和函数，作为对象的属性和方法   
方法也可以简写    
注意，简写的对象方法不能用作构造函数，会报错  


属性名表达式
---

直接用标识符作为属性名  
用表达式作为属性名，这时要将表达式放在方括号之内  
注意，属性名表达式与简洁表示法，不能同时使用，会报错  
注意，属性名表达式如果是一个对象，默认情况下会自动将对象转为字符串[object Object]  


方法的 name 属性
---

函数的name属性，返回函数名。对象方法也是函数，因此也有name属性  
如果对象的方法使用了取值函数（getter）和存值函数（setter），则name属性不是在该方法上面，而是该方法的属性的描述对象的get和set属性上面，返回值是方法名前加上get和set  
有两种特殊情况：bind方法创造的函数，name属性返回bound加上原函数的名字；Function构造函数创造的函数，name属性返回anonymous  
如果对象的方法是一个 Symbol 值，那么name属性返回的是这个 Symbol 值的描述  


属性的可枚举性和遍历 
---

**可枚举性**   
对象的每个属性都有一个描述对象（Descriptor），用来控制该属性的行为。Object.getOwnPropertyDescriptor方法可以获取该属性的描述对象  
描述对象的enumerable属性，称为“可枚举性”，如果该属性为false，就表示某些操作会忽略当前属性  

有四个操作会忽略enumerable为false的属性:  
* `for...in`循环：只遍历对象自身的和继承的可枚举的属性  
* `Object.keys()`：返回对象自身的所有可枚举的属性的键名  
* `JSON.stringify()`：只串行化对象自身的可枚举的属性  
* `Object.assign()`： 忽略enumerable为false的属性，只拷贝对象自身的可枚举的属性  

ES6 规定，所有 Class 的原型的方法都是不可枚举的  

**属性的遍历**  
ES6 一共有 5 种方法可以遍历对象的属性:  
1. `for...in`循环遍历对象自身的和继承的可枚举属性（不含 Symbol 属性）  
2. `Object.keys`返回一个数组，包括对象自身的（不含继承的）所有可枚举属性（不含 Symbol 属性）的键名  
3. `bject.getOwnPropertyNames`返回一个数组，包含对象自身的所有属性（不含 Symbol 属性，但是包括不可枚举属性）的键名  
4. `Object.getOwnPropertySymbols`返回一个数组，包含对象自身的所有 Symbol 属性的键名  
5. `Reflect.ownKeys`返回一个数组，包含对象自身的（不含继承的）所有键名，不管键名是 Symbol 或字符串，也不管是否可枚举  
以上的 5 种方法遍历对象的键名，都遵守同样的属性遍历的次序规则  
* 首先遍历所有数值键，按照数值升序排列  
* 其次遍历所有字符串键，按照加入时间升序排列  
* 最后遍历所有 Symbol 键，按照加入时间升序排列  


super 关键字
---

`super`指向当前对象的原型对象  
`super`关键字表示原型对象时，只能用在对象的方法之中，用在其他地方都会报错  


对象的扩展运算符 
---

**解构赋值**  
对象的解构赋值用于从一个对象取值，相当于将目标对象自身的所有可遍历的（enumerable）、但尚未被读取的属性，分配到指定的对象上面。所有的键和它们的值，都会拷贝到新对象上面  
解构赋值要求等号右边是一个对象，所以如果等号右边是undefined或null，就会报错，因为它们无法转为对象  
解构赋值必须是最后一个参数，否则会报错  
解构赋值的拷贝是浅拷贝，即如果一个键的值是复合类型的值（数组、对象、函数）、那么解构赋值拷贝的是这个值的引用，而不是这个值的副本  
扩展运算符的解构赋值，不能复制继承自原型对象的属性  
解构赋值的一个用处，是扩展某个函数的参数，引入其他操作  

**扩展运算符**  
对象的扩展运算符（...）用于取出参数对象的所有可遍历属性，拷贝到当前对象之中  
由于数组是特殊的对象，所以对象的扩展运算符也可以用于数组  
扩展运算符后面是一个空对象，则没有任何效果  
扩展运算符后面不是对象，则会自动将其转为对象  
扩展运算符后面是字符串，它会自动转成一个类似数组的对象，因此返回的不是空对象  
与数组的扩展运算符一样，对象的扩展运算符后面可以跟表达式  
扩展运算符的参数对象之中，如果有取值函数get，这个函数是会执行的  


AggregateError 错误对象
---

ES2021 标准之中，为了配合新增的`Promise.any()`方法（详见《Promise 对象》一章），还引入一个新的错误对象AggregateError  
`AggregateError` 本身是一个构造函数，用来生成 AggregateError 实例对象  
`AggregateError()`构造函数可以接受两个参数：  
1. `errors`：数组，它的每个成员都是一个错误对象，该参数是必须的  
2. `message`：字符串，表示 AggregateError 抛出时的提示信息，该参数是可选的  

AggregateError的实例对象有三个属性：  
1. `name`：错误名称，默认为“AggregateError”  
2. `message`：错误的提示信息  
3. `errors`：数组，每个成员都是一个错误对象  









